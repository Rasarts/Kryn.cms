{
    "version": "1.0.0",
    "owner": "1",
    "title": "Kryn.cms",
    "desc": "Administration scripts",
    "system": true,
    "widgetsLayout": "<div id='full'><\/div><div style='float: left; width: 49%;' id='left'><\/div><div style='float: right; width: 49%;' id='right'><\/div><div style='clear: both;'><\/div>",
    "widgets": {
        "unpublishedContents": {
            "title": "[[Unpublished changes]]",
            "type": "autotable",
            "position": "full",
            "columns": [
                [
                    "Version",
                    50
                ],
                [
                    "User",
                    80
                ],
                [
                    "Page",
                    null,
                    "html"
                ],
                [
                    "Date",
                    120,
                    "timestamp",
                    "d M H:i:s"
                ]
            ],
            "category": "overview",
            "withoutCountInTitle": true,
            "manipulate_row": "manipulateUnpublishedContentsRow",
            "sql": "SELECT MAX(v.id) as versionid, u.username, p.id, MAX(v.modified) as modified, p.domain_id FROM %pfx%system_user u, %pfx%system_page p, %pfx%system_page_version v WHERE draft_exist = 1 AND v.page_id = p.id AND u.id = v.owner_id AND ( p.type = 0 OR p.type = 3) GROUP BY p.id, u.username, p.domain_id ORDER BY MAX(v.modified) DESC"
        },
        "lastPageChanges": {
            "title": "[[Last page changes]]",
            "type": "autotable",
            "position": "full",
            "columns": [
                [
                    "Version",
                    50
                ],
                [
                    "User",
                    80
                ],
                [
                    "Published",
                    80,
                    "javascript: '<'+'img align=\"center\" src=\"'+_path+'media\/admin\/images\/icons\/'+(value==1?'accept':'bullet_black')+'.png\" \/>'"
                ],
                [
                    "Page",
                    null,
                    "html"
                ],
                [
                    "Date",
                    120,
                    "timestamp",
                    "d M H:i:s"
                ]
            ],
            "category": "overview",
            "height": 205,
            "itemsPerPage": 7,
            "withoutCountInTitle": true,
            "manipulate_row": "manipulateLastChangesRow",
            "sql": "SELECT v.id, u.username, v.active, v.page_id, v.modified FROM  %pfx%system_page_version v, %pfx%system_user u, %pfx%system_page p WHERE v.page_id = p.id AND u.id = v.owner_id ORDER BY v.created DESC"
        },
        "searchStats": {
            "title": "[[Top search words with results]]",
            "type": "autotable",
            "position": "left",
            "columns": [
                [
                    "Word",
                    80
                ],
                [
                    "Searched x times",
                    30
                ]
            ],
            "category": "statistic",
            "withoutCountInTitle": true,
            "sql": "SELECT word, searchcount FROM %pfx%system_search_stats WHERE found = 1 ORDER BY searchcount DESC, word"
        },
        "searchStatsNoResult": {
            "title": "[[Top search words without results]]",
            "type": "autotable",
            "position": "right",
            "columns": [
                [
                    "Word",
                    80
                ],
                [
                    "Searched x times",
                    30
                ]
            ],
            "category": "statistic",
            "withoutCountInTitle": true,
            "sql": "SELECT word, searchcount FROM  %pfx%system_search_stats WHERE found = 0 ORDER BY searchcount DESC, word"
        }
    },
    "admin": {
        "system": {
            "title": "[[System]]",
            "type": "custom",
            "isLink": 1,
            "multi": 1,
            "fixedWidth": 300,
            "fixedHeight": 200,
            "childs": {
                "desktopSettings": {
                    "title": "[[Desktop settings]]",
                    "type": "custom",
                    "isLink": 0,
                    "multi": 1,
                    "childs": [
                        
                    ]
                },
                "searchIndexerList": {
                    "title": "[[Search index]]",
                    "class": "adminSearchIndexList",
                    "type": "list",
                    "isLink": 0,
                    "multi": 1,
                    "childs": {
                        "doAction": {
                            "title": "add",
                            "type": "custom",
                            "isLink": 1,
                            "multi": 1,
                            "childs": [
                                
                            ]
                        }
                    }
                },
                "layout": {
                    "title": "[[Templates]]",
                    "type": "custom",
                    "isLink": 1,
                    "multi": 1,
                    "childs": [
                        
                    ]
                },
                "languages": {
                    "title": "[[Languages]]",
                    "type": "custom",
                    "isLink": 1,
                    "multi": 1,
                    "childs": {
                        "edit": {
                            "title": "[[Edit]]",
                            "type": "custom",
                            "isLink": 0,
                            "multi": 1,
                            "childs": [
                                
                            ]
                        }
                    }
                },
                "backup": {
                    "title": "[[Backup]]",
                    "type": "custom",
                    "isLink": 1,
                    "multi": 1,
                    "childs": [
                        
                    ]
                },
                "module": {
                    "title": "[[Extensions]]",
                    "type": "custom",
                    "isLink": 1,
                    "multi": 1,
                    "childs": {
                        "publish": {
                            "title": "[[Publish]]",
                            "type": "custom",
                            "isLink": 0,
                            "multi": 1,
                            "childs": [
                                
                            ]
                        },
                        "edit": {
                            "title": "[[Edit extension]]",
                            "type": "custom",
                            "isLink": 0,
                            "multi": 1,
                            "childs": [
                                
                            ]
                        },
                        "add": {
                            "title": "[[Create extension]]",
                            "type": "custom",
                            "isLink": 0,
                            "multi": 1,
                            "childs": [
                                
                            ]
                        },
                        "view": {
                            "title": "[[Extension]]",
                            "type": "custom",
                            "isLink": 0,
                            "multi": 1,
                            "childs": [
                                
                            ]
                        },
                        "editWindow": {
                            "title": "[[Edit window]]",
                            "type": "custom",
                            "isLink": 0,
                            "multi": 1,
                            "minWidth": 700,
                            "minHeight": 500,
                            "childs": [
                                
                            ]
                        }
                    }
                },
                "settings": {
                    "title": "[[Settings]]",
                    "type": "custom",
                    "isLink": 1,
                    "multi": 1,
                    "childs": [
                        
                    ]
                },
                "development": {
                    "title": "[[Development]]",
                    "isLink": 1,
                    "childs": {
                        "database": {
                            "title": "[[Database]]",
                            "type": "custom",
                            "isLink": 1,
                            "multi": 1,
                            "childs": [
                                
                            ]
                        },
                        "logs": {
                            "title": "[[Logs]]",
                            "type": "custom",
                            "isLink": 1,
                            "multi": 1,
                            "childs": [
                                
                            ]
                        },
                        "orm": {
                            "title": "[[ORM]]",
                            "type": "custom",
                            "isLink": 1,
                            "multi": 0,
                            "childs": [
                                
                            ]
                        },
                        "restLogger": {
                            "title": "[[Rest logger]]",
                            "type": "custom",
                            "isLink": 1,
                            "multi": 0,
                            "minWidth": 450,
                            "minHeight": 350,
                            "childs": [
                                
                            ]
                        }
                    }
                }
            }
        },
        "backend": {
            "title": "[[Backend access]]",
            "isLink": 0,
            "childs": {
                "chooser": {
                    "title": "[[Chooser]]",
                    "type": "custom",
                    "isLink": 0,
                    "multi": 1,
                    "minWidth": 600,
                    "minHeight": 300,
                    "childs": [
                        
                    ]
                },
                "stores": {
                    "title": "[[Stores]]",
                    "isLink": 0,
                    "childs": {
                        "groups": {
                            "table_key": "id",
                            "table_label": "name",
                            "table": "system_groups",
                            "type": "store",
                            "isLink": 0,
                            "childs": [
                                
                            ]
                        },
                        "languages": {
                            "table_key": "code",
                            "table_label": "title",
                            "table": "system_langs",
                            "type": "store",
                            "isLink": 0,
                            "childs": [
                                
                            ]
                        },
                        "extensions": {
                            "class": "adminStoreExtensions",
                            "type": "store",
                            "isLink": 0,
                            "childs": [
                                
                            ]
                        },
                        "domains": {
                            "type": "store",
                            "isLink": 0,
                            "childs": [
                                
                            ]
                        }
                    }
                }
            }
        },
        "overview": {
            "title": "[[Dashboard]]",
            "type": "custom",
            "icon": "#icon-home-5",
            "isLink": 1,
            "multi": 1,
            "childs": [
                
            ]
        },
        "pages": {
            "title": "[[Pages]]",
            "type": "custom",
            "icon": "#icon-screen-2",
            "isLink": 1,
            "multi": 1,
            "childs": {
                "addDialog": {
                    "title": "[[Add pages]]",
                    "type": "custom",
                    "isLink": 0,
                    "multi": 1,
                    "childs": [
                        
                    ]
                },
                "addDomains": {
                    "title": "[[Add domains]]",
                    "type": "custom",
                    "isLink": 0,
                    "multi": 1,
                    "childs": [
                        
                    ]
                },
                "bigEditor": {
                    "title": "WYSIWYG-Editor",
                    "type": "custom",
                    "isLink": 0,
                    "multi": 1,
                    "childs": [
                        
                    ]
                }
            }
        },
        "files": {
            "title": "[[Files]]",
            "type": "custom",
            "icon": "#icon-folder",
            "isLink": 1,
            "multi": 1,
            "childs": {
                "edit": {
                    "title": "[[File edit]]",
                    "type": "custom",
                    "isLink": 0,
                    "multi": 1,
                    "childs": [
                        
                    ]
                },
                "diff": {
                    "title": "[[File diff]]",
                    "type": "custom",
                    "isLink": 0,
                    "multi": 1,
                    "childs": [
                        
                    ]
                },
                "systemfiles": {
                    "title": "[[System files]]",
                    "isLink": 0,
                    "childs": [
                        
                    ]
                },
                "properties": {
                    "title": "[[Properties]]",
                    "type": "custom",
                    "isLink": 0,
                    "multi": 1,
                    "childs": [
                        
                    ]
                }
            }
        },
        "help": {
            "title": "[[Help]]",
            "type": "custom",
            "isLink": 0,
            "multi": 1,
            "childs": [
                
            ]
        }
    },
    "objectProperties": {
        "file": {
            "alt": {
                "label": "[[Alternative title]]",
                "type": "text"
            },
            "description": {
                "label": "[[Description]]",
                "type": "text"
            },
            "copyright": {
                "label": "[[Copyright available]]",
                "type": "checkbox",
                "default": 1
            }
        }
    },
    "objects": {
        "file": {
            "objectLabel": "path",
            "nestedLabel": "name",
            "nestedRootAsObject": 0,
            "nested": 1,
            "class": "objectFile",
            "dataModel": "custom",
            "multiLanguage": 0,
            "domainDepended": 0,
            "chooserFieldDataModelCondition": [
                
            ],
            "chooserFieldDataModel": "default",
            "chooserFieldDataModelFields": {
                "path": {
                    "label": "[[Path]]",
                    "type": "text"
                },
                "name": {
                    "type": "text",
                    "width": "30%"
                }
            },
            "chooserFieldDataModelField": "name",
            "chooserFieldType": "default",
            "chooserBrowserTreeJavascript": "default",
            "chooserBrowserTreeIconMapping": [
                
            ],
            "chooserBrowserTreeFixedIcon": 0,
            "chooserBrowserJavascriptClass": "ka.Files",
            "chooserBrowserOptions": {
                "onlyUserDefined": {
                    "label": "[[Only user defined files]]",
                    "type": "checkbox",
                    "empty": 1
                },
                "search": {
                    "label": "[[Enable search]]",
                    "type": "checkbox",
                    "empty": 1
                },
                "path": {
                    "label": "[[Start path]]",
                    "multi": 0,
                    "type": "folder",
                    "empty": 1
                },
                "selectionOnlyFolders": {
                    "label": "[[Only folders]]",
                    "type": "checkbox",
                    "empty": 1
                },
                "selectionOnlyFiles": {
                    "label": "[[Only files]]",
                    "type": "checkbox",
                    "empty": 1
                },
                "onlyLocal": {
                    "label": "[[Only local files]]",
                    "type": "checkbox",
                    "desc": "[[Exclude all external files in magic folders]]",
                    "empty": 1
                },
                "returnPath": {
                    "label": "[[Return path]]",
                    "type": "checkbox",
                    "desc": "[[Instead of returning the object id]]",
                    "empty": 1
                }
            },
            "chooserBrowserDataModel": "default",
            "chooserBrowserType": "custom",
            "fields": {
                "id": {
                    "label": "[[ID]]",
                    "type": "number",
                    "primaryKey": 1,
                    "autoIncrement": 1
                },
                "path": {
                    "label": "[[Path]]",
                    "type": "text",
                    "primaryKey": 0
                },
                "name": {
                    "label": "[[Name]]",
                    "type": "text",
                    "primaryKey": 0
                },
                "ext": {
                    "label": "[[File extension]]",
                    "type": "text",
                    "primaryKey": 0,
                    "empty": 1
                },
                "type": {
                    "label": "[[Type]]",
                    "items": {
                        "dir": "[[Directory]]",
                        "file": "[[File]]"
                    },
                    "multi": 0,
                    "type": "select",
                    "primaryKey": 0,
                    "empty": 1
                },
                "size": {
                    "label": "[[Size]]",
                    "type": "number",
                    "primaryKey": 0,
                    "autoIncrement": 0,
                    "desc": "[[In bytes]]",
                    "empty": 1
                },
                "ctime": {
                    "label": "[[Created]]",
                    "type": "datetime",
                    "primaryKey": 0,
                    "empty": 1
                },
                "mtime": {
                    "label": "[[Modified]]",
                    "type": "datetime",
                    "primaryKey": 0,
                    "empty": 1
                }
            },
            "label": "[[File]]"
        },
        "node": {
            "desc": "[[Pages, Links, Deposits and Navigation folder]]",
            "table": "system_page",
            "tableSync": 1,
            "tableCondition": [
                
            ],
            "nestedLabel": "title",
            "nestedRootObject": "domain",
            "nestedRootObjectField": "domain_id",
            "nestedRootObjectLabel": "domain",
            "nestedRootAsObject": 1,
            "nested": 1,
            "multiLanguage": 0,
            "domainDepended": 0,
            "chooserFieldDataModelCondition": [
                
            ],
            "chooserFieldDataModel": "default",
            "chooserFieldDataModelFields": {
                "title": {
                    "type": "text"
                }
            },
            "chooserFieldDataModelField": "title",
            "chooserFieldType": "default",
            "chooserBrowserTreeJavascriptClass": "ka.nodeTree",
            "chooserBrowserTreeJavascript": "custom",
            "chooserBrowserTreeRootObjectIconPath": "\/admin\/images\/icons\/world.png",
            "chooserBrowserTreeRootObjectFixedIcon": 1,
            "chooserBrowserTreeIconMapping": [
                
            ],
            "chooserBrowserTreeFixedIcon": 0,
            "chooserBrowserJavascriptClass": "ka.nodeChooser",
            "chooserBrowserOptions": [
                
            ],
            "chooserBrowserDataModel": "none",
            "chooserBrowserType": "custom",
            "fields": {
                "id": {
                    "label": "[[ID]]",
                    "type": "number",
                    "primaryKey": 1,
                    "autoIncrement": 1,
                    "empty": 1
                },
                "pid": {
                    "label": "[[Parent ID]]",
                    "type": "number",
                    "primaryKey": 0,
                    "autoIncrement": 0,
                    "empty": 1
                },
                "domain_id": {
                    "label": "[[Domain ID]]",
                    "type": "number",
                    "primaryKey": 0,
                    "autoIncrement": 0,
                    "empty": 1
                },
                "type": {
                    "label": "[[Type]]",
                    "type": "number",
                    "primaryKey": 0,
                    "autoIncrement": 0,
                    "empty": 1
                },
                "title": {
                    "label": "[[Title]]",
                    "type": "text",
                    "primaryKey": 0,
                    "empty": 1
                },
                "page_title": {
                    "label": "[[Page title]]",
                    "type": "text",
                    "primaryKey": 0,
                    "empty": 1
                },
                "url": {
                    "label": "[[URL]]",
                    "type": "text",
                    "primaryKey": 0,
                    "empty": 1
                },
                "link": {
                    "label": "[[Link]]",
                    "type": "text",
                    "primaryKey": 0,
                    "empty": 1
                },
                "lft": {
                    "type": "number",
                    "primaryKey": 0,
                    "autoIncrement": 0,
                    "empty": 1
                },
                "rgt": {
                    "type": "number",
                    "primaryKey": 0,
                    "autoIncrement": 0,
                    "empty": 1
                },
                "target": {
                    "label": "[[Link target]]",
                    "type": "text",
                    "primaryKey": 0,
                    "empty": 1
                },
                "visible": {
                    "label": "[[Visible in navigation]]",
                    "type": "checkbox",
                    "primaryKey": 0,
                    "empty": 1
                },
                "access_denied": {
                    "label": "[[Access denied]]",
                    "type": "text",
                    "primaryKey": 0,
                    "desc": "For everyone. This remove the page from the navigation.",
                    "empty": 1
                },
                "meta": {
                    "label": "[[Meta tags]]",
                    "type": "text",
                    "primaryKey": 0,
                    "empty": 1
                },
                "force_https": {
                    "label": "[[Force HTTPS]]",
                    "type": "checkbox",
                    "primaryKey": 0,
                    "empty": 1
                },
                "access_from": {
                    "type": "datetime",
                    "primaryKey": 0,
                    "empty": 1
                },
                "access_to": {
                    "type": "datetime",
                    "primaryKey": 0,
                    "empty": 1
                },
                "access_redirectto": {
                    "type": "page",
                    "primaryKey": 0,
                    "empty": 1
                },
                "access_nohidenavi": {
                    "type": "checkbox",
                    "primaryKey": 0,
                    "empty": 1
                },
                "access_need_via": {
                    "type": "number",
                    "primaryKey": 0,
                    "autoIncrement": 0,
                    "empty": 1
                },
                "access_from_groups": {
                    "type": "text",
                    "primaryKey": 0,
                    "empty": 1
                },
                "search_words": {
                    "type": "text",
                    "primaryKey": 0,
                    "empty": 1
                },
                "unsearchable": {
                    "type": "checkbox",
                    "primaryKey": 0,
                    "empty": 1
                }
            },
            "label": "[[Node]]"
        },
        "domain": {
            "table": "system_domains",
            "tableSync": 0,
            "tableCondition": [
                
            ],
            "nested": 0,
            "multiLanguage": 0,
            "domainDepended": 0,
            "chooserFieldDataModelCondition": [
                
            ],
            "chooserFieldDataModel": "default",
            "chooserFieldDataModelFields": {
                "lang": {
                    "label": "[[Language]]",
                    "type": "lang",
                    "width": "30%"
                },
                "domain": {
                    "label": "[[Domain]]",
                    "type": "text"
                }
            },
            "chooserFieldType": "default",
            "chooserBrowserAutoColumns": {
                "lang": {
                    "label": "[[Language]]",
                    "type": "lang",
                    "width": "30%"
                },
                "domain": {
                    "label": "[[Domain]]",
                    "type": "text"
                }
            },
            "chooserBrowserDataModel": "default",
            "chooserBrowserType": "default",
            "fields": {
                "id": {
                    "label": "ID",
                    "type": "number",
                    "primaryKey": 1,
                    "autoIncrement": 1,
                    "empty": 1
                },
                "domain": {
                    "label": "[[Domain name]]",
                    "type": "text",
                    "primaryKey": 0,
                    "empty": 1
                },
                "lang": {
                    "label": "[[Language]]",
                    "type": "lang",
                    "empty": 1
                },
                "master": {
                    "label": "[[Language master]]",
                    "type": "checkbox",
                    "primaryKey": 0,
                    "empty": 1
                }
            },
            "label": "[[Domain]]"
        },
        "system_entrypoint": {
            "class": "objectEntrypoint",
            "multiLanguage": 0,
            "domainDepended": 0,
            "selectable": 1,
            "chooserFieldDataModel": "store",
            "chooserFieldDataModelField": "path",
            "chooserFieldType": "default",
            "chooserBrowserAutoColumns": {
                "title": {
                    "type": "text",
                    "width": "40%"
                },
                "path": {
                    "type": "text"
                }
            },
            "chooserBrowserDataModel": "default",
            "chooserType": "default",
            "fields": {
                "path": {
                    "label": "[[Path]]",
                    "type": "text",
                    "primaryKey": 1,
                    "empty": 1
                },
                "title": {
                    "type": "text",
                    "primaryKey": 0,
                    "empty": 1
                },
                "type": {
                    "label": "[[Type]]",
                    "type": "text",
                    "primaryKey": 0,
                    "empty": 1
                }
            },
            "label": "[[Entry point]]",
            "chooserFieldDataModelFields": {
                "path": {
                    "type": "text"
                },
                "title": {
                    "type": "text",
                    "width": "40%"
                }
            }
        },
        "language": {
            "table": "system_langs",
            "tableSync": 1,
            "tableCondition": [
                
            ],
            "objectLabel": "title",
            "nested": 0,
            "multiLanguage": 0,
            "domainDepended": 0,
            "chooserFieldDataModelCondition": [
                
            ],
            "chooserFieldDataModel": "default",
            "chooserFieldDataModelFields": {
                "code": {
                    "label": "[[Code]]",
                    "type": "text",
                    "width": "50px"
                },
                "title": {
                    "label": "[[Title]]",
                    "type": "text"
                }
            },
            "chooserFieldDataModelField": "title, lang",
            "chooserFieldType": "default",
            "chooserBrowserAutoColumns": {
                "code": {
                    "label": "[[Code]]",
                    "type": "text",
                    "width": "50px"
                },
                "title": {
                    "label": "[[Title]]",
                    "type": "text"
                }
            },
            "chooserBrowserDataModel": "default",
            "chooserBrowserType": "default",
            "fields": {
                "code": {
                    "label": "[[Code]]",
                    "type": "text",
                    "primaryKey": 1,
                    "empty": 1
                },
                "title": {
                    "label": "[[Title]]",
                    "type": "text",
                    "primaryKey": 0,
                    "empty": 1
                },
                "langtitle": {
                    "label": "[[Nativ title]]",
                    "type": "text",
                    "primaryKey": 0,
                    "empty": 1
                },
                "userdefined": {
                    "label": "[[User defined language]]",
                    "type": "checkbox",
                    "primaryKey": 0,
                    "empty": 1
                },
                "visible": {
                    "label": "[[Visible as system language]]",
                    "type": "checkbox",
                    "primaryKey": 0,
                    "empty": 1
                }
            },
            "label": "[[Language]]"
        }
    },
    "adminJavascript": [
        "admin\/js\/ui\/ka.ObjectTree.js",
        "admin\/js\/ui\/ka.TabGroup.js",
        "admin\/js\/lib\/ka.WindowEdit.js",
        "admin\/js\/lib\/ka.WindowList.js",
        "admin\/js\/lib\/ka.CustomField.js",
        "admin\/js\/lib\/*.js",
        "admin\/js\/ui\/*.js",
        "admin\/js\/ui\/FieldTypes/Input.js",
        "admin\/js\/ui\/FieldTypes/Object.js",
        "admin\/js\/ui\/FieldTypes/*.js",
        "admin\/js\/mootools-extras\/*.js"
    ],
    "adminCss": [
        "admin\/css\/lib/*.css",
        "admin\/css\/ui/*.css"
    ],
    "community": "1",
    "writableFiles": "",
    "category": "8",
    "tags": {
        "de": "",
        "en": ""
    },
    "depends": "",
    "caches": [
        {
            "key": "systemTablesv2",
            "method": ""
        },
        {
            "key": "systemThemes",
            "method": ""
        },
        {
            "key": "systemObjects",
            "method": ""
        },
        {
            "key": "systemUrls",
            "method": "cacheDeleteSystemUrls"
        },
        {
            "key": "systemLanguages",
            "method": ""
        },
        {
            "key": "systemDomains",
            "method": ""
        },
        {
            "key": "systemPages2Domain",
            "method": ""
        }
    ],
    "cacheInvalidation": [
        {
            "key": "krynDatabaseTable"
        },
        {
            "key": "systemObjectTrees"
        }
    ],
    "__path": "module\/admin",
    "installed": true,
    "extensionCode": "admin"
}